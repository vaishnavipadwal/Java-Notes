# **To create a JSP program that takes product information from an HTML form and stores it in a database.**

### **Step 1: Database Setup**

Assuming you already have a `product` table in your database, the table schema would look something like this:

```sql
CREATE TABLE product (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    department VARCHAR(255) NOT NULL
);
```

### **Step 2: HTML Form to Accept Product Information**

Create an HTML form (`productForm.jsp`) to accept product details from the user.

```html
<!DOCTYPE html>
<html>
<head>
    <title>Product Form</title>
</head>
<body>
    <h2>Enter Product Information</h2>
    <form action="insertProduct.jsp" method="post">
        <label for="name">Product Name:</label>
        <input type="text" id="name" name="name" required><br><br>
        
        <label for="department">Department:</label>
        <input type="text" id="department" name="department" required><br><br>
        
        <input type="submit" value="Submit">
    </form>
</body>
</html>
```

### **Step 3: JSP Program to Insert Product Information**

In `insertProduct.jsp`, we will handle the POST request, retrieve form data, and store it in the database.

```jsp
<%@ page import="java.sql.*, javax.sql.*" %>
<%
    String name = request.getParameter("name");
    String department = request.getParameter("department");

    Connection conn = null;
    PreparedStatement psmt = null;

    try {
        // Load the JDBC driver (example: MySQL)
        Class.forName("com.mysql.cj.jdbc.Driver");

        // Establish database connection
        conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/your_database_name", "root", "password");

        // SQL query to insert product data
        String sql = "INSERT INTO product (name, department) VALUES (?, ?)";
        
        // Create a PreparedStatement to avoid SQL injection
        psmt = conn.prepareStatement(sql);
        psmt.setString(1, name);
        psmt.setString(2, department);

        // Execute the insert query
        int rowsAffected = psmt.executeUpdate();

        // Display message based on the outcome
        if (rowsAffected > 0) {
%>
            <h3>Product added successfully!</h3>
<%
        } else {
%>
            <h3>Failed to add product. Please try again.</h3>
<%
        }
    } catch (Exception e) {
        out.println("<h3>Error: " + e.getMessage() + "</h3>");
    } finally {
        try {
            if (psmt != null) psmt.close();
            if (conn != null) conn.close();
        } catch (SQLException e) {
            out.println("<h3>Error closing resources: " + e.getMessage() + "</h3>");
        }
    }
%>
<a href="productForm.jsp">Go back to form</a>
```
