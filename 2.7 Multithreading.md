# **Multithreading** 

### **1. What is a Thread in Java?**

A **thread** is a lightweight unit of a process that carries out tasks independently. In Java, every application has at least one threadâ€”the **main thread**, which is automatically created when the program starts. Multithreading allows a Java program to operate more efficiently by executing multiple parts concurrently.

Threads share the same memory space, which means they can communicate easily but also introduces challenges like race conditions and deadlocks. Javaâ€™s threading model is built into the language via the `Thread` class and `Runnable` interface.

---

### **2. Need for Multithreading**

The primary motivation for multithreading is **concurrency**â€”executing multiple tasks in parallel to make programs faster, more responsive, and more resource-efficient.

- **Resource Sharing**: Threads share memory, making it easy to exchange data.
- **Reduced Execution Time**: Tasks are divided among threads and can run simultaneously.
- **Non-blocking Design**: Long-running tasks (e.g., file download) can execute without freezing the user interface.
- **Utilization of Multi-core Processors**: Threads can be mapped to multiple cores to truly run in parallel.

---

### **How to Create a Thread in Java**

There are **two main ways** to create a thread in Java:

#### 1. **By extending the Thread class**

- You create a class that extends `Thread`.
- Override the `run()` method (this is the code that runs in the thread).
- Create an object of your class and call `.start()` on it to begin the new thread.

```java
class MyThread extends Thread {
    public void run() {
        System.out.println("Thread is running...");
    }

    public static void main(String[] args) {
        MyThread t = new MyThread(); // Create thread object
        t.start(); // Start the thread (calls run())
    }
}
```

#### 2. **By implementing Runnable interface**

- You create a class that implements `Runnable`.
- Define the `run()` method.
- Pass an object of your class to a `Thread` object and call `.start()`.

```java
class MyRunnable implements Runnable {
    public void run() {
        System.out.println("Thread is running using Runnable...");
    }

    public static void main(String[] args) {
        MyRunnable r = new MyRunnable();
        Thread t = new Thread(r);
        t.start();
    }
}
```

---

###  **Difference Between `run()` and `start()`**

- `start()` method creates a **new thread** and then calls the `run()` method internally.
- `run()` just runs the code in the current thread like a normal method.

So always use `start()` to begin a new thread.

---

###  **Why Use `Thread.sleep()`?**

`Thread.sleep(milliseconds)` pauses the current thread for the given time.
Useful to:
- simulate delay
- control the flow
- reduce CPU usage

---

###  **What Happens Internally?**

1. You call `.start()` on a thread object.
2. JVM creates a new thread.
3. The `run()` method is executed in that thread.
4. Main thread and child thread run in parallel.

---

### ðŸ’¡ **Simple Example with Output**

```java
class MyThread extends Thread {
    public void run() {
        for (int i = 1; i <= 3; i++) {
            System.out.println("Child Thread: " + i);
            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {
                System.out.println(e);
            }
        }
    }

    public static void main(String[] args) {
        MyThread t1 = new MyThread();
        t1.start();  // creates new thread

        for (int i = 1; i <= 3; i++) {
            System.out.println("Main Thread: " + i);
            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {
                System.out.println(e);
            }
        }
    }
}
```

**Output (can vary slightly):**
```
Child Thread: 1
Main Thread: 1
Child Thread: 2
Main Thread: 2
Child Thread: 3
Main Thread: 3
```
---

### **Program 1: Running Two Threads Simultaneously**

```java
class FirstThread extends Thread {
    public void run() {
        for (int i = 1; i <= 3; i++) {
            System.out.println("First Thread: " + i);
            try {
                Thread.sleep(400);
            } catch (InterruptedException e) {
                System.out.println(e);
            }
        }
    }
}

class SecondThread extends Thread {
    public void run() {
        for (int i = 1; i <= 3; i++) {
            System.out.println("Second Thread: " + i);
            try {
                Thread.sleep(400);
            } catch (InterruptedException e) {
                System.out.println(e);
            }
        }
    }
}

public class MultiThreadExample {
    public static void main(String[] args) {
        FirstThread t1 = new FirstThread();
        SecondThread t2 = new SecondThread();

        t1.start(); // starts FirstThread
        t2.start(); // starts SecondThread
    }
}
```

---


**Output** 
  ```
  First Thread: 1
  Second Thread: 1
  First Thread: 2
  Second Thread: 2
  First Thread: 3
  Second Thread: 3
  ```

---

### **Program 2: Printing Even and Odd Numbers using Two Threads**

```java
class EvenThread implements Runnable {
    public void run() {
        for (int i = 2; i <= 10; i += 2) {
            System.out.println("Even Thread: " + i);
            try {
                Thread.sleep(300);
            } catch (InterruptedException e) {
                System.out.println(e);
            }
        }
    }
}

class OddThread implements Runnable {
    public void run() {
        for (int i = 1; i < 10; i += 2) {
            System.out.println("Odd Thread: " + i);
            try {
                Thread.sleep(300);
            } catch (InterruptedException e) {
                System.out.println(e);
            }
        }
    }
}

public class MidLevelThreadExample {
    public static void main(String[] args) {
        EvenThread even = new EvenThread();
        OddThread odd = new OddThread();

        Thread t1 = new Thread(even);
        Thread t2 = new Thread(odd);

        t1.start();
        t2.start();
    }
}
```

---

### **Output**
```
Odd Thread: 1
Even Thread: 2
Odd Thread: 3
Even Thread: 4
Odd Thread: 5
Even Thread: 6
Odd Thread: 7
Even Thread: 8
Odd Thread: 9
Even Thread: 10
```

Due to multithreading, the exact sequence may change slightly, but both even and odd numbers will be printed by **separate threads**.

---



### **Program 3: Banking Simulation with Multithreading (Withdraw & Deposit) (Advanced Multithreaded Program with Synchronization)**

```java
class Bank {
    int balance = 1000;

    // Synchronized method for withdrawal
    synchronized void withdraw(int amount) {
        System.out.println("Trying to withdraw: " + amount);

        if (balance < amount) {
            System.out.println("Insufficient Balance... Waiting for deposit...");
            try {
                wait(); // Thread waits until notified
            } catch (InterruptedException e) {
                System.out.println(e);
            }
        }

        balance -= amount;
        System.out.println("Withdraw successful. Current Balance: " + balance);
    }

    // Synchronized method for deposit
    synchronized void deposit(int amount) {
        System.out.println("Depositing: " + amount);
        balance += amount;
        System.out.println("Deposit successful. Current Balance: " + balance);
        notify(); // Wake up waiting thread
    }
}

public class BankThreading {
    public static void main(String[] args) {
        Bank bank = new Bank();

        // Withdraw Thread
        Thread t1 = new Thread(() -> {
            bank.withdraw(1500);
        });

        // Deposit Thread
        Thread t2 = new Thread(() -> {
            try {
                Thread.sleep(2000); // Delay before deposit
            } catch (InterruptedException e) {
                System.out.println(e);
            }
            bank.deposit(1000);
        });

        t1.start();
        t2.start();
    }
}
```
---

### **Output:**

```
Trying to withdraw: 1500
Insufficient Balance... Waiting for deposit...
Depositing: 1000
Deposit successful. Current Balance: 2000
Withdraw successful. Current Balance: 500
```
---

### **Program 4: Cube Calculation Using Thread**

```java
class CubeThread extends Thread {
    int number;

    // run() method to calculate and display cube
    public void run() {
        int cube = number * number * number;
        System.out.println("Cube of " + number + " is: " + cube);
    }
}

public class CubeCalculator {
    public static void main(String[] args) {
        CubeThread thread = new CubeThread();
        thread.number = 5; // Directly specifying the value after object creation
        thread.start();
    }
}
```

###  **Expected Output:**
```
Cube of 5 is: 125
```
---

### **Program 5: Progressive Sum Using Thread and Sleep**

```java
class ProgressiveSumThread extends Thread {
    public void run() {
        int sum = 0;
        for (int i = 1; i <= 50; i++) {
            sum += i;
            System.out.println("Progressive sum after " + i + ": " + sum);
            try {
                Thread.sleep(5000); // Pause for 5 seconds
            } catch (InterruptedException e) {
                System.out.println("Thread interrupted.");
            }
        }
    }
}

public class ProgressiveSum {
    public static void main(String[] args) {
        ProgressiveSumThread thread = new ProgressiveSumThread();
        thread.start();
    }
}
```

---

### **Output**
```
Progressive sum after 1: 1
(5 second delay)
Progressive sum after 2: 3
(5 second delay)
Progressive sum after 3: 6
(5 second delay)
Progressive sum after 4: 10
...
Progressive sum after 50: 1275
```


