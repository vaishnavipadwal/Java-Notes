# **Create a JSP program that accepts an employee ID and updated department from an HTML form and updates the corresponding record in the database.**

### **Step 1: Database Setup**

Assume the following structure for your **employee** table:

```sql
CREATE TABLE employee (
    id INT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    department VARCHAR(255) NOT NULL
);
```

### **Step 2: HTML Form to Accept Employee ID and New Department**

This form will be used to input the employee ID and the new department.

```html
<!DOCTYPE html>
<html>
<head>
    <title>Update Employee Department</title>
</head>
<body>
    <h2>Update Employee Department</h2>
    <form action="updateEmployee.jsp" method="post">
        <label for="id">Employee ID:</label>
        <input type="text" id="id" name="id" required><br><br>
        
        <label for="department">New Department:</label>
        <input type="text" id="department" name="department" required><br><br>
        
        <input type="submit" value="Update Department">
    </form>
</body>
</html>
```

### **Step 3: JSP Program to Update Employee Department**

Now, create the `updateEmployee.jsp` file, where we handle the POST request to update the department based on the employee ID.

```jsp
<%@ page import="java.sql.*, javax.sql.*" %>
<%
    String employeeId = request.getParameter("id");
    String newDepartment = request.getParameter("department");

    Connection conn = null;
    PreparedStatement psmt = null;

    try {
        // Load JDBC driver for MySQL
        Class.forName("com.mysql.cj.jdbc.Driver");

        // Establish the connection to the database
        conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/your_database_name", "root", "password");

        // SQL query to update the employee's department
        String sql = "UPDATE employee SET department = ? WHERE id = ?";
        
        // Prepare the statement to avoid SQL injection
        psmt = conn.prepareStatement(sql);
        psmt.setString(1, newDepartment);
        psmt.setInt(2, Integer.parseInt(employeeId));

        // Execute the update query
        int rowsAffected = psmt.executeUpdate();

        // Display success or failure message based on the update result
        if (rowsAffected > 0) {
%>
            <h3>Employee department updated successfully!</h3>
            <p>Employee ID: <%= employeeId %></p>
            <p>New Department: <%= newDepartment %></p>
<%
        } else {
%>
            <h3>Employee with ID <%= employeeId %> not found.</h3>
<%
        }
    } catch (Exception e) {
        out.println("<h3>Error: " + e.getMessage() + "</h3>");
    } finally {
        try {
            if (psmt != null) psmt.close();
            if (conn != null) conn.close();
        } catch (SQLException e) {
            out.println("<h3>Error closing resources: " + e.getMessage() + "</h3>");
        }
    }
%>
<a href="updateEmployeeForm.jsp">Go back to the form</a>
```

### **Explanation of the JSP Code:**

1. **Retrieve Form Data**: We use `request.getParameter()` to retrieve the employee ID and the new department from the form.
2. **Database Connection**: We load the JDBC driver, establish a connection with the MySQL database, and create a prepared statement for the SQL update query.
3. **PreparedStatement**: The query updates the `department` column in the `employee` table where the `id` matches the input employee ID. We use `psmt.setString(1, newDepartment)` and `psmt.setInt(2, Integer.parseInt(employeeId))` to set the parameters for the query.
4. **Execute Update**: We execute the update query and check the number of rows affected. If the update is successful, a success message is displayed. If no rows are affected, it indicates that the employee ID was not found.
5. **Error Handling**: Basic error handling is included to catch and display exceptions.

