# **Working with Cookies**

### **What is a Cookie?**

A **cookie** is a small piece of text data stored on the client (browser) by the server. It is used to **remember information** like username, session ID, or user preferences between multiple page requests.

Cookies help in **maintaining state** between server and client in **HTTP**, which is a **stateless protocol**.

---

### **Types of Cookies in Servlets**

- **Session Cookies**: Temporary cookies that disappear when the browser is closed.
- **Persistent Cookies**: Stored on the user's machine for a specific time using `setMaxAge()`.

---

### **Creating a Cookie**

You create a cookie using the `Cookie` class from `javax.servlet.http`.

```java
Cookie cookie = new Cookie("key", "value");
response.addCookie(cookie);
```

Example:
```java
Cookie userCookie = new Cookie("username", "john");
userCookie.setMaxAge(3600); // 1 hour
response.addCookie(userCookie);
```

---

### **Reading Cookies**

You can read cookies from the request using `request.getCookies()`.

```java
Cookie[] cookies = request.getCookies();
for (Cookie c : cookies) {
    if (c.getName().equals("username")) {
        String name = c.getValue();
    }
}
```

---

### **Deleting a Cookie**

To delete a cookie, set its age to zero and add it again to the response.

```java
Cookie cookie = new Cookie("username", "");
cookie.setMaxAge(0); // deletes the cookie
response.addCookie(cookie);
```

---

### **Example Program: Setting and Reading Cookie**

#### **Servlet 1: SetCookieServlet**
```java
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class SetCookieServlet extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        Cookie cookie = new Cookie("username", "Alice");
        cookie.setMaxAge(3600); // 1 hour
        response.addCookie(cookie);

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("Cookie set for username = Alice");
    }
}
```

#### **Servlet 2: GetCookieServlet**
```java
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class GetCookieServlet extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        Cookie[] cookies = request.getCookies();
        String name = "Guest";

        if (cookies != null) {
            for (Cookie c : cookies) {
                if (c.getName().equals("username")) {
                    name = c.getValue();
                }
            }
        }

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("Welcome back, " + name);
    }
}
```

---

### **Key Cookie Methods**

- `new Cookie(String name, String value)` → creates cookie
- `setMaxAge(int seconds)` → sets duration (0 deletes cookie)
- `getName()` → returns cookie name
- `getValue()` → returns cookie value
- `addCookie(Cookie c)` → sends cookie to client
- `getCookies()` → reads cookies from client request

